---
import { ArrowLeft } from "lucide-react";
import { events } from "@/data/data";
import Layout from "@/layouts/Layout.astro";
import EventLocationMap from "@/components/event/EventLocationMap.astro";
import EventDetails from "@/components/event/EventDetails.astro";
import EventAditionalInfo from "@/components/event/EventAditionalInfo.astro";

import type { GetStaticPaths } from "astro";

export const getStaticPaths = (() => {
  return events.map((event) => {
    return {
      params: { name: event.name.replace(/\s+/g, "-").toString() },
    };
  });
}) satisfies GetStaticPaths;

const { name } = Astro.params;

const event = events.find((event) => event.name.replace(/\s+/g, "-") === name);

if (!event) {
  throw new Error(`Evento no encontrado: ${name}`);
}
---

<Layout
  title={event.seo?.title}
  description={event.seo?.description}
  ogImage={event.seo?.ogImage}
  keywords={event.seo?.keywords?.join(", ")}
>
  <main class="min-h-screen bg-gradient-to-br from-black via-zinc-900 to-black">
    <div class="container mx-auto px-4 py-12">
      <a
        href="/"
        class="inline-flex items-center text-orange-400 hover:text-orange-500 transition-colors mb-8"
      >
        <ArrowLeft className="w-4 h-4 mr-2" />
        Volver a Inicio
      </a>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        {/* Imagen del evento */}
        {
          event.image && (
            <div class="relative h-[400px] rounded-lg overflow-hidden">
              <img src={event.image} alt={event.name} class="object-cover" />
              <div class="absolute top-4 right-4 px-3 py-1 rounded-full bg-orange-500 text-white text-sm font-medium">
                {event.type}
              </div>
            </div>
          )
        }

        <EventDetails event={event} />
      </div>

      <EventLocationMap src={event.location.src} />
      <EventAditionalInfo event={event} />
    </div>
  </main>
</Layout>
